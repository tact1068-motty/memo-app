<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é«˜æ©Ÿèƒ½ãƒ¡ãƒ¢å¸³ã‚¢ãƒ—ãƒª</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
        }
        .header h1 {
            font-size: 28px;
            margin-bottom: 10px;
        }
        .weather-info {
            background: rgba(255,255,255,0.2);
            padding: 10px 20px;
            border-radius: 10px;
            font-size: 16px;
            margin-top: 10px;
            backdrop-filter: blur(10px);
        }
        .nav-buttons {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }
        .nav-btn {
            background: rgba(255,255,255,0.2);
            border: 2px solid white;
            color: white;
            padding: 10px 20px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s;
        }
        .nav-btn:hover {
            background: white;
            color: #667eea;
        }
        .nav-btn.active {
            background: white;
            color: #667eea;
        }
        .content {
            padding: 30px;
        }
        .screen {
            display: none;
        }
        .screen.active {
            display: block;
        }
        textarea {
            width: 100%;
            height: 400px;
            padding: 20px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 16px;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            resize: vertical;
            transition: border-color 0.3s;
        }
        textarea:focus {
            outline: none;
            border-color: #667eea;
        }
        .button-group {
            display: flex;
            gap: 10px;
            margin-top: 20px;
            flex-wrap: wrap;
        }
        button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 10px;
            font-size: 16px;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
        }
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }
        button:active {
            transform: translateY(0);
        }
        .status {
            margin-top: 15px;
            padding: 15px;
            background: #f0f0f0;
            border-radius: 10px;
            font-size: 14px;
            color: #666;
        }
        .settings-group {
            margin-bottom: 25px;
        }
        .settings-group h3 {
            color: #667eea;
            margin-bottom: 10px;
        }
        .settings-group p {
            color: #666;
            line-height: 1.6;
        }
        select {
            width: 100%;
            padding: 10px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 16px;
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div>
                <h1>ğŸ“ é«˜æ©Ÿèƒ½ãƒ¡ãƒ¢å¸³</h1>
                <div class="weather-info" id="weatherInfo">
                    ğŸŒ¤ï¸ å¤©æ°—ï¼šå–å¾—ä¸­...
                </div>
            </div>
            <div class="nav-buttons">
                <button class="nav-btn active" onclick="switchScreen('memo')">ãƒ¡ãƒ¢</button>
                <button class="nav-btn" onclick="switchScreen('settings')">è¨­å®š</button>
            </div>
        </div>

        <div class="content">
            <!-- ãƒ¡ãƒ¢ç”»é¢ -->
            <div id="memoScreen" class="screen active">
                <textarea id="memoText" placeholder="ã“ã“ã«ãƒ¡ãƒ¢ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„..."></textarea>
                <div class="button-group">
                    <button onclick="saveMemo()">ğŸ’¾ ä¿å­˜</button>
                    <button onclick="downloadMemo()">ğŸ“¥ ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰</button>
                    <button onclick="clearMemo()">ğŸ—‘ï¸ ã‚¯ãƒªã‚¢</button>
                </div>
                <div class="status" id="status">
                    ğŸ’¡ ãƒ¡ãƒ¢ã¯è‡ªå‹•çš„ã«ã“ã®ãƒ–ãƒ©ã‚¦ã‚¶ã«ä¿å­˜ã•ã‚Œã¾ã™
                </div>
            </div>

            <!-- è¨­å®šç”»é¢ -->
            <div id="settingsScreen" class="screen">
                <div class="settings-group">
                    <h3>âš™ï¸ ã‚¢ãƒ—ãƒªè¨­å®š</h3>
                    <p>ãƒãƒ¼ã‚¸ãƒ§ãƒ³: 1.1.0ï¼ˆå¤©æ°—æ©Ÿèƒ½è¿½åŠ ç‰ˆï¼‰</p>
                    <p>ä¿å­˜æ–¹å¼: ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸</p>
                </div>
                <div class="settings-group">
                    <h3>ğŸŒ¤ï¸ å¤©æ°—æ©Ÿèƒ½ã«ã¤ã„ã¦</h3>
                    <p>ã“ã®ã‚¢ãƒ—ãƒªã¯ã€Open-Meteo APIã‚’ä½¿ç”¨ã—ã¦æ±äº¬ã®å¤©æ°—æƒ…å ±ã‚’å–å¾—ã—ã¦ã„ã¾ã™ã€‚</p>
                    <p>ã‚¢ãƒ—ãƒªã‚’é–‹ã„ãŸæ™‚ã«è‡ªå‹•çš„ã«æœ€æ–°ã®å¤©æ°—ã‚’è¡¨ç¤ºã—ã¾ã™ã€‚</p>
                </div>
                <div class="settings-group">
                    <h3>ğŸ“Š ä½¿ç”¨çŠ¶æ³</h3>
                    <p>ç¾åœ¨ã®æ–‡å­—æ•°: <span id="charCount">0</span> æ–‡å­—</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ========================================
        // ğŸŒ¤ï¸ å¤©æ°—å–å¾—æ©Ÿèƒ½ï¼ˆæ–°æ©Ÿèƒ½ï¼ï¼‰
        // ========================================
        
        // ã‚¢ãƒ—ãƒªã‚’é–‹ã„ãŸç¬é–“ã«å¤©æ°—ã‚’å–å¾—
        window.addEventListener('load', function() {
            getWeather();
        });

        function getWeather() {
            // æ±äº¬ã®åº§æ¨™ï¼ˆç·¯åº¦ãƒ»çµŒåº¦ï¼‰
            const latitude = 35.6762;  // æ±äº¬ã®ç·¯åº¦
            const longitude = 139.6503; // æ±äº¬ã®çµŒåº¦
            
            // Open-Meteo APIã®URLï¼ˆã‚¦ã‚§ã‚¤ã‚¿ãƒ¼ã•ã‚“ã¸ã®æ³¨æ–‡æ›¸ï¼‰
            const apiUrl = `https://api.open-meteo.com/v1/forecast?latitude=${latitude}&longitude=${longitude}&current_weather=true`;
            
            // fetch = ã€Œã‚¦ã‚§ã‚¤ã‚¿ãƒ¼ã•ã‚“ã€ã“ã‚Œæ³¨æ–‡ãŠé¡˜ã„ï¼ã€
            fetch(apiUrl)
                .then(response => response.json())  // å±Šã„ãŸæ–™ç†ã‚’é–‹å°
                .then(data => {
                     // â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
                     // ã“ã“ã‚’è¿½åŠ ï¼
                        console.log('å–å¾—ã—ãŸãƒ‡ãƒ¼ã‚¿:', data);
                        console.log('å¤©æ°—éƒ¨åˆ†:', data.current_weather);
                    // â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
                    // å¤©æ°—ãƒ‡ãƒ¼ã‚¿ãŒå±Šã„ãŸï¼
                    const weather = data.current_weather;
                    const temp = weather.temperature;
                    const weatherCode = weather.weathercode;
                    
                    // å¤©æ°—ã‚³ãƒ¼ãƒ‰ã‚’çµµæ–‡å­—ã«å¤‰æ›
                    const weatherEmoji = getWeatherEmoji(weatherCode);
                    const weatherText = getWeatherText(weatherCode);
                    
                    // ç”»é¢ã«è¡¨ç¤º
                    document.getElementById('weatherInfo').innerHTML = 
                        `${weatherEmoji} ${weatherText} ${temp}â„ƒ`;
                })
                .catch(error => {
                    // ã‚¨ãƒ©ãƒ¼ãŒèµ·ããŸæ™‚ï¼ˆã‚¦ã‚§ã‚¤ã‚¿ãƒ¼ã•ã‚“ãŒè»¢ã‚“ã æ™‚ï¼‰
                    document.getElementById('weatherInfo').innerHTML = 
                        'âš ï¸ å¤©æ°—æƒ…å ±ã‚’å–å¾—ã§ãã¾ã›ã‚“ã§ã—ãŸ';
                    console.error('å¤©æ°—å–å¾—ã‚¨ãƒ©ãƒ¼:', error);
                });
             }

        // å¤©æ°—ã‚³ãƒ¼ãƒ‰ã‚’çµµæ–‡å­—ã«å¤‰æ›ã™ã‚‹é–¢æ•°
        function getWeatherEmoji(code) {
            if (code === 0) return 'â˜€ï¸';
            if (code <= 3) return 'â›…';
            if (code <= 49) return 'ğŸŒ«ï¸';
            if (code <= 69) return 'ğŸŒ§ï¸';
            if (code <= 79) return 'ğŸŒ¨ï¸';
            if (code <= 99) return 'â›ˆï¸';
            return 'ğŸŒ¤ï¸';
        }

        // å¤©æ°—ã‚³ãƒ¼ãƒ‰ã‚’æ—¥æœ¬èªã«å¤‰æ›ã™ã‚‹é–¢æ•°
        function getWeatherText(code) {
            if (code === 0) return 'å¿«æ™´';
            if (code <= 3) return 'æ™´ã‚Œ';
            if (code <= 49) return 'æ›‡ã‚Š';
            if (code <= 69) return 'é›¨';
            if (code <= 79) return 'é›ª';
            if (code <= 99) return 'é›·é›¨';
            return 'æ™´ã‚Œ';
        }

        // ========================================
        // ğŸ“ ãƒ¡ãƒ¢æ©Ÿèƒ½ï¼ˆæ—¢å­˜ã®æ©Ÿèƒ½ï¼‰
        // ========================================
        
        const memoTextarea = document.getElementById('memoText');
        const statusDiv = document.getElementById('status');

        // ãƒšãƒ¼ã‚¸ã‚’é–‹ã„ãŸæ™‚ã€ä¿å­˜ã•ã‚Œã¦ã„ã‚‹ãƒ¡ãƒ¢ã‚’èª­ã¿è¾¼ã‚€
        window.addEventListener('load', function() {
            const savedMemo = localStorage.getItem('myMemo');
            if (savedMemo) {
                memoTextarea.value = savedMemo;
                updateCharCount();
            }
        });

        // ãƒ¡ãƒ¢ã‚’ä¿å­˜ã™ã‚‹é–¢æ•°
        function saveMemo() {
            const memoContent = memoTextarea.value;
            localStorage.setItem('myMemo', memoContent);
            statusDiv.innerHTML = 'âœ… ãƒ¡ãƒ¢ã‚’ä¿å­˜ã—ã¾ã—ãŸï¼';
            setTimeout(() => {
                statusDiv.innerHTML = 'ğŸ’¡ ãƒ¡ãƒ¢ã¯è‡ªå‹•çš„ã«ã“ã®ãƒ–ãƒ©ã‚¦ã‚¶ã«ä¿å­˜ã•ã‚Œã¾ã™';
            }, 2000);
        }

        // ãƒ¡ãƒ¢ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã™ã‚‹é–¢æ•°
        function downloadMemo() {
            const memoContent = memoTextarea.value;
            if (!memoContent.trim()) {
                alert('ãƒ¡ãƒ¢ãŒç©ºã§ã™ï¼');
                return;
            }
            
            const blob = new Blob([memoContent], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'memo.txt';
            a.click();
            URL.revokeObjectURL(url);
            
            statusDiv.innerHTML = 'ğŸ“¥ ãƒ¡ãƒ¢ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¾ã—ãŸï¼';
            setTimeout(() => {
                statusDiv.innerHTML = 'ğŸ’¡ ãƒ¡ãƒ¢ã¯è‡ªå‹•çš„ã«ã“ã®ãƒ–ãƒ©ã‚¦ã‚¶ã«ä¿å­˜ã•ã‚Œã¾ã™';
            }, 2000);
        }

        // ãƒ¡ãƒ¢ã‚’ã‚¯ãƒªã‚¢ã™ã‚‹é–¢æ•°
        function clearMemo() {
            if (confirm('æœ¬å½“ã«ãƒ¡ãƒ¢ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ')) {
                memoTextarea.value = '';
                localStorage.removeItem('myMemo');
                statusDiv.innerHTML = 'ğŸ—‘ï¸ ãƒ¡ãƒ¢ã‚’ã‚¯ãƒªã‚¢ã—ã¾ã—ãŸ';
                updateCharCount();
                setTimeout(() => {
                    statusDiv.innerHTML = 'ğŸ’¡ ãƒ¡ãƒ¢ã¯è‡ªå‹•çš„ã«ã“ã®ãƒ–ãƒ©ã‚¦ã‚¶ã«ä¿å­˜ã•ã‚Œã¾ã™';
                }, 2000);
            }
        }

        // ç”»é¢ã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹é–¢æ•°
        function switchScreen(screenName) {
            // ã™ã¹ã¦ã®ç”»é¢ã‚’éè¡¨ç¤º
            document.querySelectorAll('.screen').forEach(screen => {
                screen.classList.remove('active');
            });
            
            // ã™ã¹ã¦ã®ãƒœã‚¿ãƒ³ã®é¸æŠçŠ¶æ…‹ã‚’è§£é™¤
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // æŒ‡å®šã•ã‚ŒãŸç”»é¢ã‚’è¡¨ç¤º
            if (screenName === 'memo') {
                document.getElementById('memoScreen').classList.add('active');
                document.querySelectorAll('.nav-btn')[0].classList.add('active');
            } else if (screenName === 'settings') {
                document.getElementById('settingsScreen').classList.add('active');
                document.querySelectorAll('.nav-btn')[1].classList.add('active');
                updateCharCount();
            }
        }

        // æ–‡å­—æ•°ã‚’ã‚«ã‚¦ãƒ³ãƒˆã™ã‚‹é–¢æ•°
        function updateCharCount() {
            const count = memoTextarea.value.length;
            const charCountSpan = document.getElementById('charCount');
            if (charCountSpan) {
                charCountSpan.textContent = count;
            }
        }

        // ãƒ¡ãƒ¢ãŒå¤‰æ›´ã•ã‚ŒãŸã‚‰æ–‡å­—æ•°ã‚’æ›´æ–°
        memoTextarea.addEventListener('input', updateCharCount);
    </script>
</body>
</html>
